CRUD
등록 / 상세조회, 목록조회 / 수정 / 삭제

공통

공개 유형 변경시 해당 게시글/댓글과 연결된 첨부 파일만 영향을 받음.
게시글 공개 유형을 변경했다고 연결된 댓글까지 영향을 받지 않으며,
댓글 공개 유형을 변경했다고 연결한 게시글까지 영향을 받지 않음.
오직 직접적으로 해당 게시글/댓글에 연결된 파일 그룹만 영향을 받음.

게시글 공개 유형 (NORMAL, NOTICE, PRIVATE, SECRET, HIDDEN, LOCK, BLIND)

일반글:	리소스-권한 정책에 따르는 글
공지글:	해당 게시판 목록 최상단에 강조 노출. 운영자만 수정/삭제 가능
비공개글:	작성자 본인만 볼 수 있음. 목록에 노출되지 않음. 채번은 일반글과 동일한 방식으로 함.
비밀글:	작성자와 답글을 달은 대상글의 작성자, 운영자만 볼 수 있음.
		단, 삭제 권한은 작성자와 상위 권한자에게만 있음.
		수정은 작성자만 가능
		목록에 노출됨. 제목은 [비밀글 입니다]
숨긴글:	광고글을 숨기되, 삭제는 하지 않음으로써 증거물 유지
		목록에 노출되지 않음. 작성자와 운영자는 삭제 가능.
		수정불가. 운영자는 글 유형(숨김/잠금) 변경 가능
잠긴글:	게시글 보존 목적으로 게시글의 수정/삭제를 금지함.
		목록에 노출 됨. 상세조회 가능. 운영자는 글 유형(일반/공지/비공개/비밀/숨김/잠금/가림) 변경만 가능.
		잠긴 게시글의 댓글들은 게시글 잠금에 대한 영향을 받지 않음.
가려진글:	신고수 누적으로 게시글의 상세조회가 막힌 글.
		목록에 노출됨. 제목은 [신고누적으로 가려진 글입니다]
		본문은 [신고누적으로 가려진 글입니다]
		작성자와 운영자는 상세조회 및 삭제 가능.


댓글 공개 유형 (NORMAL, SECRET, HIDDEN, LOCK, BLIND)

일반댓글:	리소스-권한 정책에 따르는 댓글
비밀댓글:	해당 댓글(그룹)이 달린 게시글의 작성자와, 답글일 경우 원댓글 작성자, 작성자 본인, 운영자 이렇게 셋이 볼 수 있음.
숨김댓글:	광고댓글을 숨기되, 삭제는 하지 않음으로써 증거물 유지. 댓글 목록에 노출되지 않음. 작성자와 운영자는 삭제 가능.
잠금댓글:	댓글 보존 목적으로 게시글의 수정/삭제를 금지함. 댓글 목록에 노출됨. 운영자는 글 유형 변경만 가능.
가림댓글:	신고수 누적으로 댓글 내용보기가 막힌 글. 작성자는 표시되며, 본문은 [신고누적으로 가려진 글입니다]. 작성자와 운영자는 상세조회 및 삭제 가능.


첨부파일 공개 유형 

- 필터링 플래그 추가(GET요청에 대해 권한 체크를 할 것인지 말 것인지) 할까?
- 


게시글 공개 유형 (NORMAL, NOTICE, PRIVATE, SECRET, HIDDEN, LOCK, BLIND)
댓글 공개 유형 (NORMAL, SECRET, HIDDEN, LOCK, BLIND)
시나리오
- 특정 댓글이 LOCK 된 상태에서, 해당 댓글의 작성자가 첨부파일을 지우려고 DELETE /file-group/13/file/1,2,3 링크를 직접 호출했을때.
1. AuthenticationFilter 에서 요청자에게 DELETE /file-group/*/file/* 실행 권한(ROLE_USER, ROLE_ADMIN, ROLE_MANAGER)이 있는지 검사 후 통과.
2. FileController/FileService 에서 해당 파일의 공개 유형(LOCK) 확인 후, 거부 메시지 응답.

- 특정 게시글이 LOCK 된 상태에서, 해당 게시글의 작성자가 첨부파일을 지우려고 DELETE /file-group/13/file/1,2,3 링크를 직접 호출했을때.
1. AuthenticationFilter 에서 요청자에게 DELETE /file-group/*/file/* 실행 권한(ROLE_USER, ROLE_ADMIN, ROLE_MANAGER)이 있는지 검사 후 통과.
2. FileController/FileService 에서 해당 파일의 공개 유형(LOCK) 확인 후, 거부 메시지 응답.

- 특정 게시판의 게시글 목록 표현시 게시글 공개 유형이 공지사항인 경우.
1.	/* 자유게시판에서 공지사항 조회 */
	select * from pst_grp_tb where pst_op_type_fk = 'NOTICE' and brd_fk = 1
2.	/* 자유게시판에서 공지사항, 비공개, 숨김글을 제외한 한 페이지 조회 */
	WHERE PST_OP_TYPE_FK <> ('NOTICE', 'PRIVATE', 'HIDDEN')
	ORDER BY PST_GRP_SQ_PK DESC
	LIMIT ${start}, ${pagesize}

- 매니저가 일반 회원의 비밀글을 지우려는 경우.
1. AuthenticationFilter 에서 요청자에게 DELETE /freeboard/* 실행 권한(ROLE_USER, ROLE_ADMIN, ROLE_MANAGER)이 있는지 검사 후 통과.
2. FreeboardController/FreeboardService 에서 해당 게시글의 공개 유형(SECRET) 확인
3. FreeboardService 에서 해당 게시글 작성자의 보유 권한(ROLE_USER) 확인
4. FreeboardService 에서 요청자의 보유 권한(ROLE_MANAGER) 확인
5. AuthenticationService 에서 두 권한(ROLE_MANAGER, ROLE_USER)의 우열 확인
6. 요청자(ROLE_MANAGER)가 대상글 작성자(ROLE_USER)보다 권한이 높으므로 삭제 수행.

- 일반 회원이 매니저의 비밀글을 지우려는 경우.
1. AuthenticationFilter 에서 요청자에게 DELETE /freeboard/* 실행 권한(ROLE_USER, ROLE_ADMIN, ROLE_MANAGER)이 있는지 검사 후 통과.
2. FreeboardService 에서 해당 게시글의 공개 유형(SECRET) 확인
3. FreeboardService 에서 해당 게시글 작성자의 보유 권한(ROLE_MANAGER) 확인
4. FreeboardService 에서 요청자의 보유 권한(ROLE_USER) 확인
5. AuthenticationService 에서 두 권한(ROLE_MANAGER, ROLE_USER)의 우열 확인
6. 요청자(ROLE_USER)가 대상글 작성자(ROLE_MANAGER)보다 권한이 낮으므로 거부 메시지 응답.


게시글 공개 유형 (NORMAL, NOTICE, PRIVATE, SECRET, HIDDEN, LOCK, BLIND)
댓글 공개 유형 (NORMAL, SECRET, HIDDEN, LOCK, BLIND)










어떻게 구현할 것인가?
0. 공개 유형 정책 서비스를 만들자.
1. 게시글 상태값 사용 (NORMAL:일반, NOTICE:공지, PRIVATE:비공개, SECRET:비밀, HIDDEN:숨김, LOCK:잠금, BLIND:가림)
2. 숨긴글만 보기 버튼 마련
3. 게시글 등록 경과일에 따른 신고 포인트 가중치 부여 모듈 개발
4. 권한필터에 게시글 상태 필터 까지 거치도록 해야할까?
5. 숨김/잠금 변경 URL을 만들고 운영자에게만 접근 권한을 부여하자.
6. 알람기능은 댓글에 글 번호별 앵커를 박자
